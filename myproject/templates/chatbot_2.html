

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResumeBot</title>

    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" 
    crossorigin="anonymous"> -->

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-color: #E3F2FD;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .invisible {
            visibility: hidden;
        }

        
        input[type="file"] {
            display: none;
        }

        /* .title {
            background-color: #0288D1;
            color: #ffffff;
            padding: 20px;
            text-align: center;
            width: 100%;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }

        .title h1 {
            font-size: 42px;
        } */

        .title {
            background-color: #0288D1;
            color: #ffffff;
            padding: 20px;
            width: 100%;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .title h1 {
            font-size: 42px;
            margin: 0 auto;
            text-align: center;
            flex: 1;
        }

        .new-chat-btn {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            background-color: #ffffff;
            color: #0288D1;
            text-decoration: none;
            font-size: 28px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease;
        }

        .new-chat-btn:hover {
            transform: scale(1.1);
        }


        /* Form layout */
        .form-layout {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            width: 100%;
        }


        /* Search Container */
        .search-container {
            background: #ffffff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 650px;
            text-align: center;
            margin: 15px 0;
        }
        
        .search-container h2 {
            color: #0277BD;
            font-size: 22px;
            margin-bottom: 15px;
        }
        
        /* Search box container */
        .search-box-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap:wrap;
            background: #ffffff;
            padding: 10px;
            border-radius: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
        }

        .search-box-container input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 16px;
            padding: 12px;
            border-radius: 20px;
            background: #E3F2FD;
        }

        /* Upload button */
        .upload-button {
            width: 40px;
            height: 40px;
            background: #0288D1;
            color: #ffffff;
            font-size: 25px !important;
            border-color:#ffffff;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            text-shadow: none;
            font-size: 18px;
            margin-left: 10px;
            margin-right: 10px;
            box-shadow: none; /* Remove any shadow */
            border: none; /* Remove any remaining border */
        }

        .upload-button:hover {
            background: #0277BD; /* Slightly darker blue */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .upload-button:active {
            background: #01579B; /* Deeper blue for press effect */
            transform: scale(0.95);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Upload menu */
        .upload-menu {
            position: absolute;
            top: -138px;
            right: 40px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 10px;
            width: 250px;
        }

        a {
            text-decoration: none;  /* remove the underline from anchor links */
        }

        .upload-option {
            display: flex;
            align-items: center;
            padding: 10px;
            cursor: pointer;
            transition: background 0.2s;
            border-radius: 5px;
            font-size: 14px;
            color: black;
        }

        .upload-option:hover {
            background: #e0e0e0;
        }

        .upload-option img {
            width: 20px;
            margin-right: 10px;
        }

        .search-button {
            background: #4CAF50;
            color: #ffffff;
            border: none;
            padding: 10px 18px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .search-button:hover {
            background: #45a049; /* Slightly darker green */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Soft shadow pop */
        }

        .search-button:active {
            background: #3e8e41; /* Even darker green */
            transform: scale(0.98); /* Tiny press effect */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* Tighter shadow on press */
        }


        /* Chat container */
        .chat-container {
            background: #ffffff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            /* max-width: 600px; */
            text-align: center;
            /* margin: 15px 0; */
            margin: 0;
        }

        /* Scrollable chat area */
        .chat {
            width: 100%;
            height: 400px;
            padding: 10px;
            overflow-y: auto;
            overflow-x: hidden;
            font-size: 16px;
            border: 2px solid #0288D1;
            border-radius: 10px;
            resize: none;
            background: #E3F2FD;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .user-message {
            display: flex; 
            justify-content: flex-end;
        }

        .gemini-message {
            display: flex; 
            justify-content: flex-start;
        }

        /* Shared bubble style */
        .message-text {
            padding: 12px 16px;
            border-radius: 12px;
            max-width: 75%;
            word-wrap: break-word;
            font-size: 15px;
            line-height: 1.4;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        }

        /* Custom colors per sender */
        .user-message .message-text {
            background-color:  #FFF9C4; /* WhatsApp-style green */
            color: #000;
            text-align: left;
        }

        .gemini-message .message-text {
            background-color: #ffffff;
            color: #000;
            text-align: left;
        }


        @media (max-width: 768px) {
            .chat-container {
                width: 95%;
            }
        }

    </style>

</head>


<body>

    <!-- <div class="title" >
        <button style="display: inline;">|||</button>
        <h1>ResumeBot</h1>
         ResumeBot - Chat-Based Resume Filtering and Search Engine 
    </div> -->

    <div class="title">
        <a href="/new-chat" class="new-chat-btn">+</a>
        <h1>ResumeBot</h1>
    </div>


    <form class="form-layout" method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Chat Container -->
        <div class="chat-container">
            <div class="chat" name="output">
                {% if conversation_database %}
                    {% for each_conversation in conversation_database %}
                        {% for key, value in each_conversation.items %}
                        <div class="user-message">
                            <p class="message-text">{{ key }}</p>
                        </div>
                    
                        <div class="gemini-message">
                            <div class="message-text">{% include "message.html" with output_data=value %}</div>
                        </div>
                        {% endfor %} 
                    {% endfor %}  
                {% endif %}

            </div>
        </div>


        <!-- Search Container -->
        <div class="search-container">

            <!-- Search box container -->
            <div class="search-box-container">
                <input type="text" name="searchInput" value="{{ request.POST.searchInput }}"
                placeholder="Enter job title, skills, etc.">
                       
                <!-- Upload button -->
                <label class="upload-button">+</label>

                <!-- Upload menu -->
                <div class="upload-menu invisible">
                    <a href="/google-drive">                    
                        <div class="upload-option" onclick="connectGoogleDrive()">
                            <img src="https://www.google.com/images/branding/product/2x/drive_2020q4_48dp.png" alt="Google Drive">
                            Connect to Google Drive
                        </div>
                    </a>
                    <div class="upload-option" onclick="connectOneDrive()">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/3/3c/Microsoft_Office_OneDrive_%282019%E2%80%93present%29.svg" alt="OneDrive">
                        Connect to  OneDrive
                    </div>
                    <hr>
                    <label class="upload-option">
                        <img src="https://png.pngtree.com/png-clipart/20230813/original/pngtree-download-upload-symbol-download-vector-picture-image_10542039.png" alt="Upload">
                        Upload from computer
                        <input type="file" id="fileInput" name="files[]" webkitdirectory directory multiple>
                        <!-- When a user clicks this input a standard file picker input appears:
                        Instead of picking one or multiple files manually, they can select a whole folder, and 
                        the browser grabs everything inside it, including subfolders.
                        The 'files[]' variable array will contain the full list, each with a relative path like 
                        images/logo.png. To know more you can refer static/Documents/Reference.docx -->
                    </label>
                </div>

                <button class="search-button" type="submit">üîç Search</button>

            </div>

        </div>

    </form>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
    crossorigin="anonymous"></script>
 
    <!-- Upload options -->
    <script>
        // Toggle upload-menu
        document.querySelector(".upload-button").addEventListener("click",function (){
            document.querySelector(".upload-menu").classList.toggle("invisible");
        })

        // Open "https://onedrive.live.com" link in a new window
        function connectOneDrive() {
            window.open("https://onedrive.live.com", "_blank");
        }

        // listening for the folder being selected.
        document.getElementById('fileInput').addEventListener('change', function(event) {       
            document.querySelector(".upload-menu").classList.toggle("invisible");
            setTimeout(function() {
                alert("The folder has been successfully uploaded.");
            },2000);
        });
    
    </script>

    <!-- auto-scrolling the chat container to the bottom -->
    <script>
        
        document.querySelector('.chat').scrollTop = document.querySelector('.chat').scrollHeight;
        // scrollTop: This property controls the vertical scroll position of the element.
        // Changing this value makes the element scroll to that position.
        // 0 means it's scrolled to the top (by default). 
        // The higher the number, the lower (further down) it scrolls.
        // scrollHeight: This returns the total height of the scrollable content, not just the visible part.
        // It's how tall the content is if you could scroll all the way to the bottom.

    </script>


</body>
</html>
